<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Balázs Dukai, Ravi Peters">
<meta name="dcterms.date" content="2024-02-12">

<title>Wijklabels</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="report_files/libs/clipboard/clipboard.min.js"></script>
<script src="report_files/libs/quarto-html/quarto.js"></script>
<script src="report_files/libs/quarto-html/popper.min.js"></script>
<script src="report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="report_files/libs/quarto-html/anchor.min.js"></script>
<link href="report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="report_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="report_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">1</span> Summary</a></li>
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources"><span class="header-section-number">2</span> Data sources</a>
  <ul class="collapse">
  <li><a href="#sec-spreiding" id="toc-sec-spreiding" class="nav-link" data-scroll-target="#sec-spreiding"><span class="header-section-number">2.1</span> Spreiding van energielabels</a></li>
  <li><a href="#bag-and-3dbag" id="toc-bag-and-3dbag" class="nav-link" data-scroll-target="#bag-and-3dbag"><span class="header-section-number">2.2</span> BAG and 3DBAG</a></li>
  <li><a href="#construction-year" id="toc-construction-year" class="nav-link" data-scroll-target="#construction-year"><span class="header-section-number">2.3</span> Construction year</a></li>
  <li><a href="#cbs-neighborhoods" id="toc-cbs-neighborhoods" class="nav-link" data-scroll-target="#cbs-neighborhoods"><span class="header-section-number">2.4</span> CBS Neighborhoods</a></li>
  <li><a href="#ep-online-for-validation" id="toc-ep-online-for-validation" class="nav-link" data-scroll-target="#ep-online-for-validation"><span class="header-section-number">2.5</span> EP-Online for validation</a></li>
  </ul></li>
  <li><a href="#method" id="toc-method" class="nav-link" data-scroll-target="#method"><span class="header-section-number">3</span> Method</a>
  <ul class="collapse">
  <li><a href="#sec-floors" id="toc-sec-floors" class="nav-link" data-scroll-target="#sec-floors"><span class="header-section-number">3.1</span> Number of floors</a></li>
  <li><a href="#sec-woningtype" id="toc-sec-woningtype" class="nav-link" data-scroll-target="#sec-woningtype"><span class="header-section-number">3.2</span> Dwelling types</a>
  <ul class="collapse">
  <li><a href="#classification-of-a-pand" id="toc-classification-of-a-pand" class="nav-link" data-scroll-target="#classification-of-a-pand"><span class="header-section-number">3.2.1</span> Classification of a Pand</a></li>
  <li><a href="#eengezinswoningen" id="toc-eengezinswoningen" class="nav-link" data-scroll-target="#eengezinswoningen"><span class="header-section-number">3.2.2</span> Eengezinswoningen</a></li>
  <li><a href="#sec-meergezins" id="toc-sec-meergezins" class="nav-link" data-scroll-target="#sec-meergezins"><span class="header-section-number">3.2.3</span> Meergezinswoningen</a></li>
  </ul></li>
  <li><a href="#conversion-of-appartement-types-to-pre-nta8800-types" id="toc-conversion-of-appartement-types-to-pre-nta8800-types" class="nav-link" data-scroll-target="#conversion-of-appartement-types-to-pre-nta8800-types"><span class="header-section-number">3.3</span> Conversion of appartement types to pre-NTA8800 types</a></li>
  <li><a href="#sec-vormfactor" id="toc-sec-vormfactor" class="nav-link" data-scroll-target="#sec-vormfactor"><span class="header-section-number">3.4</span> Vormfactor</a></li>
  <li><a href="#estimating-the-energy-labels" id="toc-estimating-the-energy-labels" class="nav-link" data-scroll-target="#estimating-the-energy-labels"><span class="header-section-number">3.5</span> Estimating the energy labels</a></li>
  </ul></li>
  <li><a href="#validating-the-energy-label-estimation" id="toc-validating-the-energy-label-estimation" class="nav-link" data-scroll-target="#validating-the-energy-label-estimation"><span class="header-section-number">4</span> Validating the energy label estimation</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results"><span class="header-section-number">5</span> Results</a>
  <ul class="collapse">
  <li><a href="#dwelling-types" id="toc-dwelling-types" class="nav-link" data-scroll-target="#dwelling-types"><span class="header-section-number">5.1</span> Dwelling types</a></li>
  <li><a href="#energy-labels-estimation" id="toc-energy-labels-estimation" class="nav-link" data-scroll-target="#energy-labels-estimation"><span class="header-section-number">5.2</span> Energy labels estimation</a>
  <ul class="collapse">
  <li><a href="#sec-only-possible" id="toc-sec-only-possible" class="nav-link" data-scroll-target="#sec-only-possible"><span class="header-section-number">5.2.1</span> Considering only possible labels</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions"><span class="header-section-number">6</span> Conclusions</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">7</span> References</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="report.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li><li><a href="report.ipynb" download="report.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Wijklabels</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Balázs Dukai, Ravi Peters </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 12, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div id="e0beda12" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> wijklabels.woningtype <span class="im">import</span> Bouwperiode</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="summary" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Summary</h1>
<p>The Voorbeeldwoningen 2022 study describes the distribution of energy labels per vormfactor range for each dwelling type of the WoON 2018 study. The latest release of the 3DBAG data set (<code>2023.10.08</code>) provides the surface areas for calculating the vormfactor for each Pand. This work explores the possibility of calculating the vormfactor for each dwelling within a Pand and applying the energy label distributions of the Voorbeeldwoningen 2022 study to estimate the energy label distribution of each neighborhood of the Netherlands.</p>
<p>We validate our estimated energy labels against the labels registered in the EP-Online database. The validation shows varying deviation between the estimated and EP-Online labels. The labels <em>A</em> and <em>B</em> have 0 median deviation, the labels <em>A+</em>, <em>A++</em> are one label overestimated, the labels <em>C</em>, <em>D</em> are one label underestimated. The rest of the labels have a deviation of two labels or more from the EP-Online labels.</p>
<p>There are two major limitations that impact the accuracy of the results. First, the 3D location of appartements is not known, therefore strong assumptions are made on the interior layout of a Pand, leading to a mainly inaccurate estimation of the appartament subtypes. This inaccuracy propagates to the estimation of the vormfactor and then energy label of appartements. Second, the energy label distributions in the Voorbeeldwoningen 2022 study are incomplete, therefore 14% of the input dwelling could not receive an energy label, and 32% of the validated dwellings have an energy label that is not possible to assign due to missing data in the Voorbeeldwoningen 2022 study.</p>
</section>
<section id="data-sources" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Data sources</h1>
<section id="sec-spreiding" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="sec-spreiding"><span class="header-section-number">2.1</span> Spreiding van energielabels</h2>
<p>The <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> study provides a representative sample of energy label distributions per dwelling type and construction period. The distribution is two-dimensional, one dimension is the energy label, the second dimension is the vormfactor of the dwelling. However, the described distributions are not continuous. For example, in case of Flatwoningen from the period 1965-1974, there is no data in the vormfactor range 1,00-1,50 and labels A+++-D, see <a href="#fig-woon2022-spreiding" class="quarto-xref">Figure&nbsp;1</a>. Such gaps have a significant impact on the quality of our results (see <a href="#sec-only-possible" class="quarto-xref">Section&nbsp;5.2.1</a>).</p>
<p>If the dwelling has a vormfactor in a range where there is no energy label data in the distribution, the dwelling is not assigned an energy label.</p>
<p>The energy label distributions were extracted from the Excel file <code>Illustraties spreiding Energielabel in WoON2018 per Voorbeeldwoning 2022 - 2023 01 25.xlsx</code>, which we received from RVO.</p>
<div id="fig-woon2022-spreiding" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-woon2022-spreiding-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/woon2022_spreiding.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-woon2022-spreiding-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Energy label distribution of flatwoningen, <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span>
</figcaption>
</figure>
</div>
</section>
<section id="bag-and-3dbag" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="bag-and-3dbag"><span class="header-section-number">2.2</span> BAG and 3DBAG</h2>
<p>The <a href="https://www.kadaster.nl/zakelijk/registraties/basisregistraties/bag">BAG</a> data set is the official register of buildings and addresses of the Netherlands. The BAG contains two object types that are relevant for this study, <em>Pand</em> and <em>Verblijfsobject (VBO)</em>. Each VBO contains information about its usage in the <code>gebruiksdoel</code> attribute. For this study, only those VBO are usere which usage includes <code>woonfunctie</code>. The <a href="https://3dbag.nl">3DBAG</a> is an extension of the BAG data set, containing the outer 3D shell of the Pand objects. The 3DBAG does not contain information on the VBOs. We used the 3DBAG version <code>2023.10.08</code>. The 3DBAG <code>2023.10.08</code> is based on the BAG 2.0 Extract with a release date of <em>08.09.2023</em>.</p>
<p>The BAG extract of <code>08.09.2023</code> contains <em>10.877.129</em> Pand objects and <em>10.144.833</em> Verblijfsobjecten.<br>
The 3DBAG version <code>2023.10.08</code> that is based the mentioned BAG extract, contains <em>10.360.281</em> Pand objects.<br>
The party walls dataset, that is based on the 3DBAG, contains <em>10.363.460</em> Pand objects.<br>
There are <em>5.646.848</em> Pand and <em>8.721.692</em> VBO with gebruiksdoel that includes <code>woonfunctie</code>.</p>
<p>In the span of 2023, the project “Levering databestand 3D-BAG” funded by RVO, extended the 3DBAG with 3D surface areas. The surface information is included in the 3DBAG since version <code>2023.10.08</code>. However, we used the CSV file (<code>3dbag_v20231008_rvo_export.csv</code>) that was delivered directly to RVO. The reason for using the CSV file is purely to simplify the data preparation process.</p>
</section>
<section id="construction-year" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="construction-year"><span class="header-section-number">2.3</span> Construction year</h2>
<p>The <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> study determines at most seven construction year periods, depending on the dwelling type. We adhere to the same periods for categorizing the buildings on their construction year. The periods are listed in <a href="#tbl-count-period-type" class="quarto-xref">Table&nbsp;1</a> together with the count of dwellings in the results.</p>
<div class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'/home/balazs/Development/wijklabels/tests/data/output/labels_individual.csv'</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    usecols<span class="op">=</span>[<span class="st">"bouwperiode"</span>, <span class="st">"woningtype"</span>, <span class="st">"woningtype_pre_nta8800"</span>],</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    converters<span class="op">=</span>{</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"bouwperiode"</span>: Bouwperiode.from_str</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>total <span class="op">=</span> df.count().iloc[<span class="dv">0</span>]  <span class="co"># count non-NA (!) cells</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>pt_crosstab <span class="op">=</span> pd.crosstab(</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"bouwperiode"</span>],</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>df[<span class="st">"woningtype_pre_nta8800"</span>],</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    margins<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    margins_name<span class="op">=</span><span class="st">"Totaal"</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>ct <span class="op">=</span> pt_crosstab.<span class="bu">apply</span>(</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> col: <span class="bu">list</span>(<span class="bu">map</span>(<span class="kw">lambda</span> cnt: <span class="ss">f"</span><span class="sc">{</span>cnt<span class="sc">}</span><span class="ss"> (</span><span class="sc">{</span><span class="bu">round</span>(cnt <span class="op">/</span> total <span class="op">*</span> <span class="dv">100</span>)<span class="sc">}</span><span class="ss">%)"</span>, col))</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>).replace(</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"0 (0%)"</span>, <span class="st">""</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>).reset_index(</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    drop<span class="op">=</span><span class="va">False</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>ct.columns.name <span class="op">=</span> <span class="st">"Woningtype"</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>ct[<span class="st">"Bouwperiode"</span>] <span class="op">=</span> ct[<span class="st">"bouwperiode"</span>].<span class="bu">apply</span>(</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> bp: bp.format_pretty() <span class="cf">if</span> bp <span class="op">!=</span> <span class="st">"Totaal"</span> <span class="cf">else</span> bp</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>ct.drop(<span class="st">"bouwperiode"</span>, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>ct.set_index(<span class="st">"Bouwperiode"</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>ct</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-count-period-type" class="cell quarto-float anchored" data-execution_count="3">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-count-period-type-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Aantal (en percentage) van woningen per bouwperiode en woningtype
</figcaption>
<div aria-describedby="tbl-count-period-type-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Woningtype</th>
<th data-quarto-table-cell-role="th">2 onder 1 kap</th>
<th data-quarto-table-cell-role="th">galerij</th>
<th data-quarto-table-cell-role="th">maisonnette</th>
<th data-quarto-table-cell-role="th">overig</th>
<th data-quarto-table-cell-role="th">portiek</th>
<th data-quarto-table-cell-role="th">rijwoning hoek</th>
<th data-quarto-table-cell-role="th">rijwoning tussen</th>
<th data-quarto-table-cell-role="th">vrijstaande woning</th>
<th data-quarto-table-cell-role="th">Totaal</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Bouwperiode</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">&lt; 1945</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>236 (1%)</td>
<td>648 (3%)</td>
<td>1669 (6%)</td>
<td></td>
<td>2553 (10%)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">&lt; 1964</td>
<td>328 (1%)</td>
<td>273 (1%)</td>
<td>2313 (9%)</td>
<td>11007 (43%)</td>
<td></td>
<td></td>
<td></td>
<td>156 (1%)</td>
<td>14077 (55%)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1946 - 1964</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>372 (1%)</td>
<td>212 (1%)</td>
<td>474 (2%)</td>
<td></td>
<td>1058 (4%)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1965 - 1974</td>
<td>16 (0%)</td>
<td>269 (1%)</td>
<td>168 (1%)</td>
<td>2394 (9%)</td>
<td>50 (0%)</td>
<td>193 (1%)</td>
<td>629 (2%)</td>
<td>18 (0%)</td>
<td>3737 (15%)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1975 - 1991</td>
<td>10 (0%)</td>
<td>70 (0%)</td>
<td>285 (1%)</td>
<td>1473 (6%)</td>
<td>51 (0%)</td>
<td>59 (0%)</td>
<td>138 (1%)</td>
<td>13 (0%)</td>
<td>2099 (8%)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1992 - 2005</td>
<td>8 (0%)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>64 (0%)</td>
<td>221 (1%)</td>
<td>1 (0%)</td>
<td>294 (1%)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2006 - 2014</td>
<td>2 (0%)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>14 (0%)</td>
<td>35 (0%)</td>
<td>6 (0%)</td>
<td>57 (0%)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2015 &lt;</td>
<td>35 (0%)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>43 (0%)</td>
<td>100 (0%)</td>
<td>7 (0%)</td>
<td>185 (1%)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1992 &lt;</td>
<td></td>
<td>140 (1%)</td>
<td>108 (0%)</td>
<td>1418 (6%)</td>
<td>15 (0%)</td>
<td></td>
<td></td>
<td></td>
<td>1681 (7%)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Totaal</td>
<td>399 (2%)</td>
<td>752 (3%)</td>
<td>2874 (11%)</td>
<td>16292 (63%)</td>
<td>724 (3%)</td>
<td>1233 (5%)</td>
<td>3266 (13%)</td>
<td>201 (1%)</td>
<td>25741 (100%)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="cbs-neighborhoods" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="cbs-neighborhoods"><span class="header-section-number">2.4</span> CBS Neighborhoods</h2>
<p>The neighborhoods are used for aggregating the dwelling energy labels. The neighborhood boundaries are retrieved from the Centraal Bureau voor de Statistiek. The BAG Pand objects are assigned to a neighborhood with an intersection test. Every BAG Pand is assigned to only one neighborhood.</p>
<p>Version of CBS Wijken en Buurten: 2022 v1, <a href="https://service.pdok.nl/cbs/wijkenbuurten/2022/atom/downloads/wijkenbuurten_2022_v1.gpkg">link to data</a></p>
</section>
<section id="ep-online-for-validation" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="ep-online-for-validation"><span class="header-section-number">2.5</span> EP-Online for validation</h2>
<p><em>“EP-Online is de officiële landelijke database waarin energielabels en energieprestatie-indicatoren van gebouwen zijn opgenomen.” <span class="citation" data-cites="_EP_2023"><span>“<span>EP-Online</span>”</span> (<a href="#ref-_EP_2023" role="doc-biblioref">2023</a>)</span></em> We use the energy labels from EP-Online as “ground truth” for the validation of our estimated labels. Therefore, we assessed if we can consider the set of dwellings with a registered label on EP-Online a reliable reliable reference for comparison.</p>
<p>The EP-Online database contains energy labels that were determined using different methods. We only use the labels that were determined with the NTA8800 method. That is, the <code>Pand_berekeningstype</code> contains <code>NTA 8800</code>. In total, these records constitue to <em>1.284.241</em> VBOs.</p>
<p><a href="#fig-dist-bag-ep-online-bp" class="quarto-xref">Figure&nbsp;2</a> shows that both the BAG and the EP-Online data set have a very similar distribution of dwellings across all construction year periods. This indicates that the registered energy labels in EP-Online represent well the complete set of dwellings in the Netherlands, when considering the construction period.</p>
<div id="fig-dist-bag-ep-online-bp" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dist-bag-ep-online-bp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/bouwperiode_dist.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dist-bag-ep-online-bp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Spreiding van woningen per bouwperiode in de BAG en in de EP-Online gegevens
</figcaption>
</figure>
</div>
<p><a href="#fig-dist-bag-ep-online-wt" class="quarto-xref">Figure&nbsp;3</a> shows that both the BAG and the EP-Online data set have a very similar distribution of dwellings across all dwelling types. This indicates that the registered energy labels in EP-Online represent well the complete set of dwellings in the Netherlands, when considering the dwelling types. However, there are two caveats that need to be considered here. Firstly, the comparison does not include the apartment subtypes, only the main <em>apartement</em> type. This is, because there is no reliable method for determining the apartment subtypes for the complete BAG data set. Secondly, the dwelling types of the BAG were estimated by ourselves, because there we do not have authoritative dwelling type information for the whole BAG data set (see <a href="#sec-woningtype" class="quarto-xref">Section&nbsp;3.2</a>).</p>
<div id="fig-dist-bag-ep-online-wt" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dist-bag-ep-online-wt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/woningtype_dist.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dist-bag-ep-online-wt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Spreiding van woningen per woningtype in de BAG en in de EP-Online gegevens
</figcaption>
</figure>
</div>
<p><a href="#fig-dist-coverage" class="quarto-xref">Figure&nbsp;4</a> shows that 75% of neighborhoods have a coverage of 4-19%, while 50% of the neighborhoods has 8% coverage or less. Nearly all neighborhoods have at least 3% coverage. This indicates that nearly all neighborhoods have reference labels available in the EP-Online data set.</p>
<div id="fig-dist-coverage" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dist-coverage-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/coverage_vbo_dist_dense.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dist-coverage-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Energielabeldekking van woningen in de buurten
</figcaption>
</figure>
</div>
<p>From the these analysis we conclude that the EP-Online database is a reliable reference for validating our estimated energy labels.</p>
</section>
</section>
<section id="method" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Method</h1>
<p>This work estimates the vormfactor for individual dwellings and the energy label distribution of neighborhoods of the Netherlands. Due to the lack of suitable, national data, we worked with often severe assumptions on the parameters of a dwelling. The steps for these assumptions are listed below in their order in the energy label estimation process.</p>
<ol type="1">
<li>Estimating the number of floors of a Pand.</li>
<li>Estimating the type of a dwelling, both for eengezinswoningen and meergezinswoningen.</li>
<li>Converting from a NTA8800 appartament type (e.g.&nbsp;<em>apartement - hoekdak</em>) to a pre-NTA8800 appartament type (e.g.&nbsp;<em>galerij</em>).</li>
<li>Estimating the vormfactor of an appartement. Even if the exact number of floors and the correct appartement type, such as <em>hoekdak</em> were known, it wouldn’t be possible to exactly calculate the vormfactor appartaments, due to the variations in internal layouts of buildings. However, it would be possible to make a much more accurate estimation.</li>
<li>Estimating the energy label of an individual dwelling from the probability of energy labels documented in the Voorbeelwoningen 2022 study.</li>
</ol>
<section id="sec-floors" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="sec-floors"><span class="header-section-number">3.1</span> Number of floors</h2>
<p>The number of floors of a Pand is required for distributing the VBO-s across the floors in a meergezinswoning. We compute the number of floors by dividing the gebruiksoppervlakte by the area of the roofprint taken from the 3DBAG. The gebruiksoppervlakte is the sum of each VBO’s <code>oppervlakte</code> of a Pand in the BAG. The roofprint area is the <a href="https://docs.3dbag.nl/nl/schema/attributes/#b3_opp_grond">totale oppervlakte begane grond</a>, without any underground parts. The resulting value is rounded up to the nearest whole number, which gives us the number of floors.</p>
</section>
<section id="sec-woningtype" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="sec-woningtype"><span class="header-section-number">3.2</span> Dwelling types</h2>
<p>Dwellings are classified into distinct types. The current classification, as used by the NTA8800 method, is listed in <a href="#tbl-nta8800-types" class="quarto-xref">Table&nbsp;2</a>. In case of appartements, hoek/tussen refers to the horizontal position of the appartement in the building, while vloer/midden/dak/dakvloer refers to its vertical position. For the sake of simplicity, we refer to this classification as <strong>NTA8800-types</strong>.</p>
<div id="tbl-nta8800-types" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-nta8800-types-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Dwelling types used by the NTA8800 method
</figcaption>
<div aria-describedby="tbl-nta8800-types-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<thead>
<tr class="header">
<th>Eengezinswoningen</th>
<th>Meergezinswoningen</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>vrijstaande woning</td>
<td>appartement - hoekvloer</td>
</tr>
<tr class="even">
<td>2 onder 1 kap</td>
<td>appartement - hoekmidden</td>
</tr>
<tr class="odd">
<td>rijwoning tussen</td>
<td>appartement - hoekdak</td>
</tr>
<tr class="even">
<td>rijwoning hoek</td>
<td>appartement - hoekdakvloer</td>
</tr>
<tr class="odd">
<td></td>
<td>appartement - tussenvloer</td>
</tr>
<tr class="even">
<td></td>
<td>appartement - tussenmidden</td>
</tr>
<tr class="odd">
<td></td>
<td>appartement - tussendak</td>
</tr>
<tr class="even">
<td></td>
<td>appartement - tussendakvloer</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Before the introduction of the NTA8800 method, dwellings were classified slightly differently, see <a href="#tbl-pre-nta8800-types" class="quarto-xref">Table&nbsp;3</a>. This is the classification used by the <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> study. For the sake of simplicity, we refer to this classification as <strong>pre-NTA8800-types</strong>.</p>
<div id="tbl-pre-nta8800-types" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-pre-nta8800-types-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Dwelling types used in <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span>
</figcaption>
<div aria-describedby="tbl-pre-nta8800-types-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<thead>
<tr class="header">
<th>Eengezinswoningen</th>
<th>Meergezinswoningen</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>vrijstaande woning</td>
<td>maisonette</td>
</tr>
<tr class="even">
<td>2 onder 1 kap</td>
<td>galerij</td>
</tr>
<tr class="odd">
<td>rijwoning tussen</td>
<td>portiek</td>
</tr>
<tr class="even">
<td>rijwoning hoek</td>
<td>flat (overig)</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>The types of the single family houses are equivalent before and after NTA8800. On the other hand, there is no clear relation between the types of the meergezingswoningen before and after NTA8800.</p>
<p>This work requires that we know both the <em>NTA8800</em> and the <em>pre-NTA8800</em> type of each dwelling. The <em>pre-NTA8800</em> type is needed, because that is used by <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span>, and the <em>NTA8800</em> type is needed, because that is used by the validation data on EP-Online.</p>
<p>We first estimate the <em>NTA8800</em> type and then convert that to a <em>pre-NTA8800</em> type. The classification of eengezinswoningen is fairly straightforward and can be done using a conventional GIS analysis on the BAG polygons. Classifying the meergezingswoningen is much harder because this depends on the interior architecture of a Pand, and we have no knowledge of this from our input datasets. Therefore a number of strong assumptions and educated guesses had to be made to come up with a method.</p>
<section id="classification-of-a-pand" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="classification-of-a-pand"><span class="header-section-number">3.2.1</span> Classification of a Pand</h3>
<p>Each BAG Pand are classified by clustering the intersecting BAG geometries. For example, a row of five row-houses forms one cluster, because they form a group of connected objects. We determine the types <em>vrijstaand/2 onder 1 kap/rijwoning</em> from the number of buildings in the cluster. In case of a <em>rijwoning</em>, we determine its position <em>hoek/tussen</em> from the number intersections with other buildings in the cluster.</p>
<p>Misclassification occurs if the intersections are incorrectly determined, usually, because there is a small gap between BAG polygons that are supposed to be touching. Thus, in order to improve the classification of eengezinswoningen, the BAG polygons need topological correction so the gaps and overlaps are corrected.</p>
</section>
<section id="eengezinswoningen" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="eengezinswoningen"><span class="header-section-number">3.2.2</span> Eengezinswoningen</h3>
<p>If a pand only contains a single VBO, then we consider the VBO an <em>eengezinswoning</em> and the VBO receives the classification of the Pand.</p>
</section>
<section id="sec-meergezins" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="sec-meergezins"><span class="header-section-number">3.2.3</span> Meergezinswoningen</h3>
<p>The meergezingswoningen consist of a single main type, <em>appartement</em>. If a Pand contains more than one VBO, then all of its VBOs are classified as <em>appartement</em>.</p>
<p>The <em>appartement</em> subtypes are determined from the vertical and horizonal position of the VBO within the pand. Firstly, the VBO-s are distributed across the floors (see <a href="#sec-floors" class="quarto-xref">Section&nbsp;3.1</a>) of the Pand to determine their vertical position. Each floor is assigned the same number of appartements, which is calculated by dividing the number of VBO-s by the number of floors. We call the <em>number of appartements per floor</em> <code>N</code>. Then the total appartements in the pand are distributed so that the first <code>N</code> is assigned to the ground floor (<em>vloer</em>), the second <code>N</code> is assigned to the top floor (<em>dak</em>) and the rest is distributed evenly across the floors in between (<em>midden</em>). If a <code>N</code> equals the total number of appartements, then the appartements are classified as <em>dakvloer</em>.</p>
<p>Secondly, the appartements are distributed horizontally on each floor. We assume two configurations for the layout of the appartements, single row or double row. The choice between single or double row depends on the number of appartements per floor and a random choice. If the number of appartements per floor is less than or equal three, then a single row layout is chosen, otherwise there is a 50% chance for a double row layout. Now, the number of <em>hoek</em> appartements are estimated based on the classification of the pand and the previously determined layout. If there are remaining appartements on the floor that are not classified as <em>hoek</em>, they are classified as <em>tussen</em>.</p>
</section>
</section>
<section id="conversion-of-appartement-types-to-pre-nta8800-types" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="conversion-of-appartement-types-to-pre-nta8800-types"><span class="header-section-number">3.3</span> Conversion of appartement types to pre-NTA8800 types</h2>
<p>The <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> study uses the pre-NTA8800 dwelling types, while the EP-Online database uses the NTA8800 dwelling types for the energy labels that are calculated with the NTA8800 method. This work relies on the results of the <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> study to estimate the energy label of dwellings, therefore we convert the previously determined NTA8800 appartement type to pre-NTA8800 types. Since there is no direct relation between the two classification, we can only estimate the pre-NTA8800 types.</p>
<p>We assign the pre-NTA8800 type to the appartement based on the distribution of pre-NTA8800 types in the EP-Online database and the construction date of the dwelling, see <a href="#fig-woningtype-bouwjaar" class="quarto-xref">Figure&nbsp;5</a>. For example, if the dwelling was built in the period of 1965-1974, there is an 84% chance that it receives the <em>flatwoning (overig)</em> pre-NTA8800 type.</p>
<div id="fig-woningtype-bouwjaar" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-woningtype-bouwjaar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/pre_nta8800_apartement_bouwjaar.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-woningtype-bouwjaar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Spreiding van pre-NTA8800 meergezinswoningtypen in de EP-Online database, <span class="citation" data-cites="_EP_2023"><span>“<span>EP-Online</span>”</span> (<a href="#ref-_EP_2023" role="doc-biblioref">2023</a>)</span>
</figcaption>
</figure>
</div>
</section>
<section id="sec-vormfactor" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="sec-vormfactor"><span class="header-section-number">3.4</span> Vormfactor</h2>
<p>The vormfactor is calculated as the fraction of the verliesoppervlakte and gebruiksoppervlakte. The verliesoppervlakte is the sum of all surface areas that envelope the dwelling, except the surfaces that are shared with another dwelling. The gebruiksoppervlakte is the area that is registered for the VBO in the BAG (VBO’s <code>oppervlakte</code>).</p>
<p>We compute the vormfactor for each Pand. The required surface areas for calculating the verliesoppervlakte are part of the 3DBAG since version <code>2023.10.08</code>. The vormfactor of an eengezinswoning is equivalent to the vormfactor of the Pand.</p>
<p>For appartements, we assign a portion of the surface areas to each appartement, depending on their type (see <a href="#sec-meergezins" class="quarto-xref">Section&nbsp;3.2.3</a>). The total roof surface area is divided equally among the appartements on the roof floor. Only 95% of the total wall surface area is used to account for wall surfaces that cover hallways and other non-dwelling spaces in the pand. The wall surface area is then divided among each appartement in a way that the appartements on the hoek are assigned approximately 3x the wall surface area of a tussen appartement. The total ground surface area is divided equally among the appartements on the ground floor.</p>
</section>
<section id="estimating-the-energy-labels" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="estimating-the-energy-labels"><span class="header-section-number">3.5</span> Estimating the energy labels</h2>
<p>In order to determine the accurate energy label for a dwelling, the dwelling needs to be surveyed in-person by a qualified professional. This is not feasible to do on a national scale. However, we can estimate the type of the dwelling (<a href="#sec-woningtype" class="quarto-xref">Section&nbsp;3.2</a>) and we know the construction period from the BAG. In addition, we can calculate the vormfactor for eengezinswoningen accurately, and estimate the vormfactor for meergezinswoningen (see <a href="#sec-vormfactor" class="quarto-xref">Section&nbsp;3.4</a>). Finally, from <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> we have a distribution of energy labels for each combination of the three parameters, dwelling type, construction period and vormfactor. Then the energy label of an individual dwelling is selected based on the likelihood of all labels in across the three variables.</p>
<p>For example, given a dwelling with the parameters of dwelling type <em>Flatwoning</em>, construction period of <em>1965-1974</em> and a vormfactor in the range of <em>1,50-2,00</em>, the estimated energy label for the dwelling depends on the range of available labels, <em>C-G</em>, and their probability (see <a href="#fig-woon2022-spreiding" class="quarto-xref">Figure&nbsp;1</a>).</p>
<p>Due to the gaps in the energy label distributions that are presented in <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> (see <a href="#sec-spreiding" class="quarto-xref">Section&nbsp;2.1</a>), there are situations where it is impossible to estimate the correct label for a VBO. For example, the VBO has a registered label <em>B</em> in EP-Online, however, <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> does not have data for label <em>B</em> and the parameters of the VBO. We consider such labels <em>impossible</em>, since with our method and the limitations of the <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> data, it is not possible to assign the correct label. Measuring the <em>impossible</em> labels allows us to evaluate the impact of the gaps in the <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> data and the sensitivity or our method.</p>
<p>The individual labels are aggregated per neighborhood to estimate the energy label distributions for each neighborhood in the Netherlands.</p>
</section>
</section>
<section id="validating-the-energy-label-estimation" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Validating the energy label estimation</h1>
<p>We validate our energy label estimation against the energy labels in the <span class="citation" data-cites="_EP_2023"><span>“<span>EP-Online</span>”</span> (<a href="#ref-_EP_2023" role="doc-biblioref">2023</a>)</span> database. We compare the estimated labels to the EP-Online labels in terms of <em>deviation</em>. The <em>deviation</em> is calculated as the numeric, signed distance from one label to the reference label. Where the distance from a worse label to a better label is positive. For example, the distance from <em>A++++</em> to <em>G</em> is <em>-10</em>, the distance from <em>G</em> to <em>A++++</em> is <em>10</em>.</p>
<p>The validation process measures the following aspects.</p>
<ul>
<li><p>Number of VBO that did not receive an energy label (due to a gap in the energy label distribution, see <a href="#sec-spreiding" class="quarto-xref">Section&nbsp;2.1</a>).</p></li>
<li><p>Percent of labels that match the EP-Online labels exactly. For example the estimated label is <em>A</em>, then the EP-Online is also <em>A</em> for the selected VBO.</p></li>
<li><p>Percent of labels that match the EP-Online labels with one label deviation. For example the estimated label is <em>A</em>, then the EP-Online can be any of <em>A+</em>, <em>A</em>, <em>B</em>.</p></li>
<li><p>The median, mean, standard deviation, minimum and maximum of <em>deviations</em> per neighborhood, and for the complete data set.</p></li>
</ul>
</section>
<section id="results" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Results</h1>
<section id="dwelling-types" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="dwelling-types"><span class="header-section-number">5.1</span> Dwelling types</h2>
<p>When comparing against the EP-Online data, our dwelling classification shows 87% accuracy for the eengezingswoningen, and 26% accuracy for the meergezinswoningen.</p>
</section>
<section id="energy-labels-estimation" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="energy-labels-estimation"><span class="header-section-number">5.2</span> Energy labels estimation</h2>
<p>From the available <em>5.385.950</em> input Pand objects, <em>4.847.298</em> received an energy label.<br>
Thus, <em>13%</em> of objects did not receive a label. The missing labels are caused by the gaps in energy label distributions of the <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> .</p>
<p>We have compared our energy label estimation to the labels available in <span class="citation" data-cites="_EP_2023"><span>“<span>EP-Online</span>”</span> (<a href="#ref-_EP_2023" role="doc-biblioref">2023</a>)</span>. <a href="#fig-nl-dist-bar" class="quarto-xref">Figure&nbsp;6</a> shows the distribution estimated (green) and ep-online energy labels for the dwellings that are registered on ep-online. We can observe that the most common estimated energy label is <em>C</em>, making up a bit over 25% of the labels. However, in the ep-online data set, the labels <em>A</em> and <em>C</em> each consitute to about 25% of the total labels.</p>
<div id="fig-nl-dist-bar" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-nl-dist-bar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/nl_NL.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-nl-dist-bar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Distribution of estimated and ep-online energy labels for the dwellings that are registered on ep-online
</figcaption>
</figure>
</div>
<p>We have found that the mean deviation from the <span class="citation" data-cites="_EP_2023"><span>“<span>EP-Online</span>”</span> (<a href="#ref-_EP_2023" role="doc-biblioref">2023</a>)</span> labels is <strong>-1,2</strong>, with a standard deviation of <strong>2,1</strong>.<br>
In other words, on average our estimated labels are about one label below the EP-Online labels, with a standard deviation of two labels.</p>
<p>However, if we look at the deviations per label, we get a more detailed image. <a href="#fig-nl-dist" class="quarto-xref">Figure&nbsp;7</a> shows that our <em>A+++, A++++</em> are on average 3-5 labels overestimated, while our <em>E, F, G</em> labels are on average 2-4 labels underestimated compared to the EP-Online data.</p>
<div id="fig-nl-dist" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-nl-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/nl_NL_dist_est_ep.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-nl-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Deviation of the estimated labels from the EP-Online labels
</figcaption>
</figure>
</div>
<section id="sec-only-possible" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="sec-only-possible"><span class="header-section-number">5.2.1</span> Considering only possible labels</h3>
<p>Due to the gaps in the energy label distributions of the <span class="citation" data-cites="RVO_Voorbeeldwoningen_2022">RVO (<a href="#ref-RVO_Voorbeeldwoningen_2022" role="doc-biblioref">2022</a>)</span> study, <em>32%</em> of the dwellings have a label in EP-Online that is missing from the Voorbeeldwoningen 2022 data (see <a href="#sec-spreiding" class="quarto-xref">Section&nbsp;2.1</a>). In such cases, it is not possible to assign the correct energy label to the dwelling, since there is no probability for the label. If we limit our validation to those dwellings where the correct label does have a probability in energy label distributions, we gain insight on the impact of the gaps in the energy label distributions.</p>
<p>When comparing only the possible labels, the mean deviation from the <span class="citation" data-cites="_EP_2023"><span>“<span>EP-Online</span>”</span> (<a href="#ref-_EP_2023" role="doc-biblioref">2023</a>)</span> labels is <strong>-0,6</strong>, with a standard deviation of <strong>1,6</strong>.</p>
</section>
</section>
</section>
<section id="conclusions" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Conclusions</h1>
<p>The results show that the most common estimated energy label is <em>C</em>, with about X% of dwellings having this label. On average, the estimated labels are one label below the true label, with a standard deviation of two labels. The most accurate label is <em>B</em>, with with the lowest median deviation from the ep-online labels, followed by the label <em>A</em>.</p>
<p>Our findings indicate that the NTA8800 energy labels in the EP-Online database have sufficient coverage to be used as a validation set for developing large area, national methods in the future. However, the energy labels that were determined with the NTA8800 method use a different appartement classification than what is used by the WoON 2018 and Voorbeeldwoningen 2022 studies. In our method we follow the appartement classification of the NTA8800 labels, therefore a conversion between the two classification is needed. For the conversion we follow the statistical distribution of appartement types that we found in the EP-Online data set, because to the best of our knowledge there is no deterministic method to do this conversion. Therefore, the appartement type conversion in itself adds more uncertainty to the energy label estimation of appartements.</p>
<p>Due to the lack of national data on the 3D location of apartements, our method for estimating the horizontal and vertical position of an appartement is guesswork and thus inaccurate. Therefore in its current state we do not recommend to use results for meergezinswoningen. In our results, 44% of dwellings are appartements.</p>
<p>Our results show that the gaps in the Voorbeeldwoningen 2022 energy label distributions have a significant impact on the accuracy of the estimated labels (see <a href="#sec-only-possible" class="quarto-xref">Section&nbsp;5.2.1</a>), impacting 32% of the estimated labels. For this reason we recommend to adapt the Voorbeeldwoningen study so that the energy label distributions are as complete as possible.</p>
</section>
<section id="references" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-_EP_2023" class="csl-entry" role="listitem">
<span>“<span>EP-Online</span>.”</span> 2023. <a href="https://www.ep-online.nl/" class="uri">https://www.ep-online.nl/</a>.
</div>
<div id="ref-RVO_Voorbeeldwoningen_2022" class="csl-entry" role="listitem">
RVO. 2022. <span>“Voorbeeldwoningen 2022 - Bestaande Bouw.”</span> Technical report RVO-231-2022/BR-DUZA. Rijksdienst voor Ondernemend Nederland.
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>